<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="JavaScript完美收官, Sunny">
    <meta name="description" content="1-快速掌握 BOM 核心技能1.什么是 BOM?DOM：document object model 文档对象模型BOM：browser object model     浏览器对象模型主要处理浏览器窗口（window）和框架（iframe">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>JavaScript完美收官 | Sunny</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Sunny</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Sunny</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">JavaScript完美收官</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Front-end-article/">
                                <span class="chip bg-color">Front end article</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2020-01-20
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="1-快速掌握-BOM-核心技能"><a href="#1-快速掌握-BOM-核心技能" class="headerlink" title="1-快速掌握 BOM 核心技能"></a>1-快速掌握 BOM 核心技能</h1><h2 id="1-什么是-BOM"><a href="#1-什么是-BOM" class="headerlink" title="1.什么是 BOM?"></a>1.什么是 BOM?</h2><p>DOM：document object model 文档对象模型<br>BOM：browser object model     浏览器对象模型<br>主要处理浏览器窗口（window）和框架（iframe），描述了与浏览器进行交互的方法和接口，可以对浏览器窗口进行访问和操作，不过通常浏览器特定的 JavaScript 扩展都被看做 BOM 的一部分。扩展如下： 1.弹出新的浏览器窗口 2.移动、关闭浏览器窗口以及调整窗口大小 3.提供 Web 浏览器详细信息的定位对象 4.提供用户屏幕分辨率详细信息的屏幕对象 5.对 cookie 的支持<br>6.IE 扩展了 BOM，加入了 ActiveXObject 类，可以通过 JavaScript 实例化 ActiveX 对象</p>
<h2 id="2-BOM-的核心—window"><a href="#2-BOM-的核心—window" class="headerlink" title="2.BOM 的核心—window"></a>2.BOM 的核心—window</h2><p>window 对象是 BOM 的顶层(核心)对象，玩转 BOM，就是玩转 window 的属性和方法<br>助记：DOM：document. ； BOM：window.<br>Window 对象它具有双重角色，既是通过 js 访问浏览器窗口的一个接口，又是一个全局对象。这意味着在网页中定义的任何对象，变量和函数，都是 window 的属性</p>
<h2 id="3-BOM-和-DOM-的关系"><a href="#3-BOM-和-DOM-的关系" class="headerlink" title="3.BOM 和 DOM 的关系"></a>3.BOM 和 DOM 的关系</h2><p>JavaScript 语法的标准化组织是 ECMA（原生 JS）<br>DOM 的标准化组织是 W3C——html css<br>BOM…(很尴尬)——浏览器</p>
<p><img src="/img/1-1.png"></p>
<h2 id="4-BOM-的组成"><a href="#4-BOM-的组成" class="headerlink" title="4.BOM 的组成"></a>4.BOM 的组成</h2><p>归纳：都是对象<br>Window JavaScript 层级中的顶层对象表示浏览器窗口<br>Navigator 包含客户端浏览器的信息<br>History 包含了浏览器窗口访问过的 URL<br>Location 包含了当前 URL 的信息<br>Screen 包含客户端显示屏的信息（兼容差）</p>
<h3 id="详解-window"><a href="#详解-window" class="headerlink" title="详解 window"></a>详解 window</h3><p>window.innerHeight: 返回窗口的文档显示区高度：包括滚动条<br>window.innerWidth: 返回窗口的文档显示区宽度：包括滚动条<br>document.clientHeight: 不包括滚动条</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(window.pageXOffset); console.log(window.pageYOffset);</span><br><span class="line">//可以赋值，但是不能操控滚动条</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3000px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">3000px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>iframe：父子页面。子能取爹，反之不行<br>引入了另外一个页面（有完整的 html 结构）<br>跨域，同源策略<br>name：给显示内容无关，这是窗口的名字</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.name = &#x27;123&#x27;; window.name;//可以取出来;窗口名字</span><br></pre></td></tr></table></figure>

<p>alert()警告框<br>confirm()</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.confirm(&#x27;邓哥虚否&#x27;)//点确定则true</span><br><span class="line">window.confirm(&#x27;邓哥虚否&#x27;)//点取消则false</span><br></pre></td></tr></table></figure>

<p>prompt()</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.prompt(&#x27;hello&#x27;)//输入</span><br></pre></td></tr></table></figure>

<p>关闭广告：是否要关闭的提示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.onbeforeunload = function () &#123; return &#x27;hhh&#x27; &#125;</span><br></pre></td></tr></table></figure>

<p>open()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.open(<span class="string">&quot;https://www.baidu.com&quot;</span>, <span class="string">&quot;duyi&quot;</span>, <span class="string">&quot;width=200, heigth:200&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> newWindow = <span class="built_in">window</span>.open(</span><br><span class="line">  <span class="string">&quot;https://www.baidu.com&quot;</span>,</span><br><span class="line">  <span class="string">&quot;duyi&quot;</span>,</span><br><span class="line">  <span class="string">&quot;width=200, heigth:200&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> newWindow = <span class="built_in">window</span>.open(<span class="string">&quot;./child.html&quot;</span>, <span class="string">&quot;aa&quot;</span>, <span class="string">&quot;width=200, height=200&quot;</span>);</span><br><span class="line">newWindow;</span><br></pre></td></tr></table></figure>

<p>close()</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h3 id="Navigator-对象"><a href="#Navigator-对象" class="headerlink" title="Navigator 对象"></a>Navigator 对象</h3><p>浏览器详解_计算机素养<br>onLine：是否联网——做离线应用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.navigator.onLine) &#123;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//取缓存</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="history-对象"><a href="#history-对象" class="headerlink" title="history 对象"></a>history 对象</h2><p>一个窗口，多次变动</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history.length history.back() history.forward() history.go(2)向前2个</span><br></pre></td></tr></table></figure>

<h3 id="location-对象"><a href="#location-对象" class="headerlink" title="location 对象"></a>location 对象</h3><p>url:资源定位器<br>组成：协议，域名，端口号(https 默认 443,http 默认 80)，路径，参数，锚点（#）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">协议location.protocol 域名location.host 路径location.pathname</span><br><span class="line">参数location.search 锚点location.hash//必须# // 改 location.href =</span><br><span class="line">&#x27;https://www.taobao.com&#x27; location.search = &#x27;?wd=lol&#x27;;</span><br></pre></td></tr></table></figure>

<p>改域名/参数——页面刷新<br>改锚点——不刷新————应用：单页面应用</p>
<h1 id="2-javascript-必会常用知识点"><a href="#2-javascript-必会常用知识点" class="headerlink" title="2-javascript 必会常用知识点"></a>2-javascript 必会常用知识点</h1><h1 id="一、浏览器的基本组成"><a href="#一、浏览器的基本组成" class="headerlink" title="一、浏览器的基本组成"></a>一、浏览器的基本组成</h1><blockquote>
<p>要说 DOCTYPE (改变渲染模式)，其和最后页面被展示的效果有关系，那我们深入浅出一下吧</p>
</blockquote>
<p>浏览器请求页面大致经历了哪些过程</p>
<ol>
<li>发送 url，DNS 查询，请求 IP 地址</li>
<li>TCP 三次握手</li>
<li>服务器响应内容 js html css img</li>
<li>按照成哥讲的 js 时间线理解 js 解析执行的过程就好</li>
<li>渲染页面： DOM 树 CSSDOM 树，生成 RENDER 树，布局，渲染</li>
<li>TCP 四次挥手</li>
</ol>
<p>这一过程有很多部分参与，说一下浏览器的组成，和组成部分的功能。<br>这里着重说一下渲染页面这部分，有渲染引擎主要参与<br>以下我们主要来说其渲染的过程</p>
<h2 id="1-浏览器的基本组成"><a href="#1-浏览器的基本组成" class="headerlink" title="1.浏览器的基本组成"></a>1.浏览器的基本组成</h2><ol>
<li>用户界面——外壳</li>
<li>浏览器引擎——程序</li>
<li>渲染引擎</li>
<li>网络</li>
<li>UI 后端</li>
<li>Js 引擎——解释执行 js</li>
<li>数据存储</li>
</ol>
<h2 id="2-页面展示过程分析"><a href="#2-页面展示过程分析" class="headerlink" title="2.页面展示过程分析"></a>2.页面展示过程分析</h2><p><img src="/img/1-2.png"><br>上图解析：输入 url：先 onLine 是否脱机，脱机取缓存，没脱机进行下一步</p>
<h2 id="3-浏览器基本组成"><a href="#3-浏览器基本组成" class="headerlink" title="3.浏览器基本组成"></a>3.浏览器基本组成</h2><p><img src="/img/1-3.png"><br>在布局这块 是由不同渲染模式来定义不同的规则的<br>拿一个举例子  IE6 怪异模式盒子模型 和 标准模式盒子模型    IE6 怪异模式和标准模式的 margin: 100 auto 0;<br>总结一下: 渲染的最后效果，由于采取模式的不同而产生了不同的效果<br>我们能大概了解了渲染模式是什么意思有什么样的作用。</p>
<p>IE6 怪异模式其实现在主流浏览器都已经不然兼容了（不去迎合了，被废弃掉了）但我们可以见到了解一下历史以及上述的过程吗。为什么要有怪异模式和标准模式的区别-》向前兼容如何控制显示页面的浏览器采取什么样的模式来渲染  DOCTYPE<br>​</p>
<h1 id="面试题：浏览器渲染原理"><a href="#面试题：浏览器渲染原理" class="headerlink" title="面试题：浏览器渲染原理"></a>面试题：浏览器渲染原理</h1><ul>
<li>介绍一下你对浏览器内核的理解？</li>
</ul>
<p>主要分成两部分：渲染引擎和 JS 引擎。 渲染引擎的职责就是渲染，即在浏览器窗口中显示所请求的内容。默认情况下，<strong>渲染引擎</strong>可以显示 html、xml 文档及图片，它也可以借助插件（一种浏览器扩展）显示其他类型 数据，例如使用 PDF 阅读器插件，可以显示 PDF 格式。 <strong>JS 引擎</strong>：解析和执行 javascript 来实现网页的动态效果。最开始渲染引擎和 JS 引擎并 没有区分的很明确，后来 JS 引擎越来越独立，内核就倾向于只指渲染引擎</p>
<ul>
<li>浏览器的渲染原理？</li>
</ul>
<p>（1）首先解析收到的文档，根据文档定义构建一棵 DOM 树，DOM 树是由 DOM 元 素及属性节点组成的。 （2）然后对 CSS 进行解析，生成 CSSOM 规则树。</p>
<p>（3）根据 DOM 树和 CSSOM 规则树构建渲染树。渲染树的节点被称为渲染对象， 渲染对象是一个包含有颜色和大小等属性的矩形，渲染对象和 DOM 元素相对应，但这种 对应关系不是一对一的，不可见的 DOM 元素不会被插入渲染树。还有一些 DOM 元素对应 几个可见对象，它们一般是一些具有复杂结构的元素，无法用一个矩形来描述。</p>
<p>（4）当渲染对象被创建并添加到树中，它们并没有位置和大小，所以当浏览器生成渲 染树以后，就会根据渲染树来进行布局（也可以叫做回流）。这一阶段浏览器要做的事情是 要弄清楚各个节点在页面中的确切位置和大小。通常这一行为也被称为“自动重排”。</p>
<p>（5）布局阶段结束后是绘制阶段，遍历渲染树并调用渲染对象的 paint 方法将它们 的内容显示在屏幕上，绘制使用 UI 基础组件。值得注意的是，这个过程是逐步完成的，为 了更好的用户体验，渲染引擎将会尽可能早的将内容呈现到屏幕上，并不会等到所有的 html 都解析完成之后再去构建和布局 render 树。它是解析完一部分内容就显示一部分内容，同 时，可能还在通过网络下载其余内容</p>
<ul>
<li>渲染过程中遇到 JS 文件怎么处理？（浏览器解析过程）</li>
</ul>
<p>JavaScript 的加载、解析与执行会阻塞文档的解析，也就是说，在构建 DOM 时，HTML 解析器若遇到了 JavaScript，那么它会暂停文档的解析，将控制权移交给 JavaScript 引擎， 等 JavaScript 引擎运行完毕，浏览器再从中断的地方恢复继续解析文档。 也就是说，如果你想首屏渲染的越快，就越不应该在首屏就加载 JS 文件，这也是都 建议将 script 标签放在 body 标签底部的原因。当然在当下，并不是说 script 标签必须放 在底部，因为你可以给 script 标签添加 defer 或者 async 属性。</p>
<ul>
<li>CSS 如何阻塞文档解析？（浏览器解析过程）</li>
</ul>
<p>理论上，既然样式表不改变 DOM 树，也就没有必要停下文档的解析等待它们，然而， 存在一个问题，JavaScript 脚本执行时可能在文档的解析过程中请求样式信息，如果样式还 没有加载和解析，脚本将得到错误的值，显然这将会导致很多问题。 所以如果浏览器尚未完成 CSSOM 的下载和构建，而我们却想在此时运行脚本，那么 浏览器将延迟 JavaScript 脚本执行和文档的解析，直至其完成 CSSOM 的下载和构建。也就 是说，在这种情况下，浏览器会先下载和构建 CSSOM，然后再执行 JavaScript，最后再继续 文档的解析。</p>
<h1 id="二、渲染引擎-渲染模式"><a href="#二、渲染引擎-渲染模式" class="headerlink" title="二、渲染引擎-渲染模式"></a>二、渲染引擎-渲染模式</h1><h2 id="1-什么是渲染？-渲染引擎，渲染过程"><a href="#1-什么是渲染？-渲染引擎，渲染过程" class="headerlink" title="1.什么是渲染？ 渲染引擎，渲染过程"></a>1.什么是渲染？ 渲染引擎，渲染过程</h2><p>渲染: 在电脑绘图中是指用软件从模型生成图像的过程。<br>渲染引擎: 其职责就是渲染，即在浏览器窗口中显示所请求的内容。<br>过程：解析 html 从而构建 DOM 树-&gt;CSS Rule 树-&gt;构建 Render 树-&gt;布局 Render 树-&gt;绘制 Render 树<br>DOMtree 没有样式；CSStree 没有结构<br><img src="/img/1-4.png"></p>
<h2 id="2-渲染模式的历史意义"><a href="#2-渲染模式的历史意义" class="headerlink" title="2.渲染模式的历史意义"></a>2.渲染模式的历史意义</h2><p>在多年以前（IE6 诞生以前），各浏览器都处于各自比较封闭的发展中（基本没有兼容性可谈）。<br>随着 WEB 的发展，兼容性问题的解决越来越显得迫切，随即，各浏览器厂商发布了按照标准模式（遵循各厂商制定的统一标准）工作的浏览器，比如 IE6 就是其中之一。<br>但是考虑到以前建设的网站并不支持标准模式，所以各浏览器在加入标准模式的同时也保留了混杂模式（即以前那种未按照统一标准工作的模式，也叫怪异模式）。<br>向前兼容网页，向后兼容浏览器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.compatMode);</span><br><span class="line"><span class="comment">//1.&lt;!DOCTYPE html&gt;写——CSS1compat  标准</span></span><br><span class="line"><span class="comment">//2.&lt;!DOCTYPE html&gt;不写——Backcompat 怪异，虽说是怪异了，但是也不是完全怪异，区别不是很大，google怪异也变不成IE那种</span></span><br></pre></td></tr></table></figure>

<h2 id="3-渲染模式如何控制"><a href="#3-渲染模式如何控制" class="headerlink" title="3.渲染模式如何控制"></a>3.渲染模式如何控制</h2><p>三种标准模式的写法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line">2.<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//W3C//DTD HTML 4.01//EN&quot;</span> <span class="meta-string">&quot;http://www.w3.org/TR/html4/strict.dtd&quot;</span>&gt;</span></span><br><span class="line">3.<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span> <span class="meta-string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/1-5.png"></p>
<h1 id="三、Label-标签"><a href="#三、Label-标签" class="headerlink" title="三、Label 标签"></a>三、Label 标签</h1><p>应用:鼠标聚焦</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>关联触发</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oLabel = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;label&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">oLabel.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> oInput = <span class="built_in">document</span>.getElementById(<span class="string">&quot;demo&quot;</span>);</span><br><span class="line">oInput.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="四、属性和特性"><a href="#四、属性和特性" class="headerlink" title="四、属性和特性"></a>四、属性和特性</h1><h3 id="属性和特性"><a href="#属性和特性" class="headerlink" title="属性和特性"></a>属性和特性</h3><p>特性：天生就可以具有的如 id type class value checked   有映射关系 js 对象-&gt;html 标签<br>属性包含特性  <br>非特性的属性： data cst log times 等等     无映射关系 js 对象-&gt;html 标签<br>在行间加属性：setAttribute getAttribute 。<br>是属性就能赋值<br>jq 源码  attr prop 底层原理就是这个。prop 是正常 JS 操作，点…。attr 是 setAttribute getAttribute。<br>​</p>
<h3 id="图片预加载和懒加载"><a href="#图片预加载和懒加载" class="headerlink" title="图片预加载和懒加载"></a>图片预加载和懒加载</h3><p>图片预加载 有充裕的能力时可以这么做<br>加载图片一点点出现，用户体验比较差<br>懒加载：按需加载：<br>写一个预加载：还没加载完不展示（不让她一点一点展示），下载完在展示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建方法1</span></span><br><span class="line"><span class="comment">// var oImage = document.createElement(&#x27;img&#x27;);</span></span><br><span class="line"><span class="comment">// 创建方法2</span></span><br><span class="line"><span class="keyword">var</span> oImage = <span class="keyword">new</span> Image();</span><br><span class="line">oImage.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;demo&quot;</span>);</span><br><span class="line">  appendChild(<span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line">oImage.src =</span><br><span class="line">  <span class="string">&quot;https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2187922730,604631233&amp;fm=27&amp;gp=0.jpg&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>懒加载<br>淘宝 图片预加载+懒加载<br>监控滑轮位置；不断判断当前 div 位置；采用预加载；把图片正式的添加到页面中<br>Math.random()∈[0, 1)<br>12~36 随机数：<br>12+24*Math.random()<br>文档碎片 docuemnt.createDocumentFragment();<br>集中操作减少布局计算（重排）和绘制次数（重绘）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oF = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"><span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">&quot;wrapper&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> newLi = <span class="built_in">document</span>.createElement(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">  newLi.innerText = i + <span class="string">&quot;&quot;</span>;</span><br><span class="line">  oF.appendChild(newLi);</span><br><span class="line">&#125;</span><br><span class="line">oUl.appendChild(oF);</span><br></pre></td></tr></table></figure>

<p>理想很丰满显示很骨干,并未提高多少效率<br>其实可以采用字符串拼接的方式<br>现在还没学 vue，现在可以用字符串拼接</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> htmlStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">&quot;wrapper&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  htmlStr += <span class="string">&quot;&lt;li&gt;&quot;</span> + i + <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">oUl.innerHTML = htmlStr;</span><br></pre></td></tr></table></figure>

<p>封装 className <br>document.getElementsByClassName()<br>​</p>
<h1 id="Bug-调试方法"><a href="#Bug-调试方法" class="headerlink" title="Bug 调试方法"></a>Bug 调试方法</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>10<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>1.页面一开始就报错了控制台直接显示错误信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oLiArray = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; oLiArray.length, i++) &#123;<span class="comment">//error</span></span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">    oLiArray[index].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      update(<span class="built_in">this</span>, index);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">dom, index</span>) </span>&#123;</span><br><span class="line">  dom.innerText = <span class="built_in">parseInt</span>(dom.innerText) + index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.页面一开始没报错，执行中报错了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oLiArray = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; oLiArray.length; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">    oLiArray[index].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      update(<span class="built_in">this</span>, index);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updata</span>(<span class="params">dom, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//error</span></span><br><span class="line">  dom.innerText = <span class="built_in">parseInt</span>(dom.innerText) + index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.没有报错和预想不一样   结果反推</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oLiArray = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; oLiArray.length; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">    oLiArray[index].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// console.log(i);//10</span></span><br><span class="line">      <span class="comment">// update(i);//error</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">dom, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// dom可变量</span></span><br><span class="line">  <span class="comment">// console.log(dom, index);//10 undefined</span></span><br><span class="line">  dom.innerText = <span class="built_in">parseInt</span>(dom.innerText) + index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>断点调试.写上 debugger</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oLiArray = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;l&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; oLiArray.length; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">    oLiArray[index].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      update(<span class="built_in">this</span>, index);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">dom, index</span>) </span>&#123;</span><br><span class="line">  dom.innerText = <span class="built_in">parseInt</span>(dom.innerText) + index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h1><ol>
<li> 字符串长度<code>str.length</code></li>
<li>查找字符串中的字符串<br> <code>indexOf</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;The full name of China is the People&#x27;s Republic of China.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> pos = str.indexOf(<span class="string">&quot;China&quot;</span>); <span class="comment">// 首次出现索引的地方:17</span></span><br></pre></td></tr></table></figure>

<pre><code> `lastIndexOf()` 指定文本在字符串中_最后_一次出现的索引
</code></pre>
<p>两种方法</p>
<ol>
<li>没找到返回-1</li>
<li>可以传第二个参数（ 作为检索起始位置 ）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;The full name of China is the People&#x27;s Republic of China.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> pos = str.indexOf(<span class="string">&quot;China&quot;</span>, <span class="number">18</span>); <span class="comment">// 51</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>检索字符串中的字符串<code>search()</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;The full name of China is the People&#x27;s Republic of China.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> pos = str.search(<span class="string">&quot;full&quot;</span>); <span class="comment">// 返回匹配的位置 4</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>两种方法，indexOf() 与 search()，是<em>相等的</em>。</p>
</blockquote>
<p>这两种方法是不相等的。区别在于：</p>
<ul>
<li>search() 方法无法设置第二个开始位置参数。</li>
<li>indexOf() 方法无法设置更强大的搜索值（正则表达式）。</li>
</ul>
<ol start="4">
<li>提取部分字符串<br> 有三种提取部分字符串的方法：</li>
</ol>
<ul>
<li><code>slice(start, end)</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Apple, Banana, Mango&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.slice(<span class="number">7</span>, <span class="number">13</span>); <span class="comment">// Banana</span></span><br></pre></td></tr></table></figure>

<p>如果某个参数为负，则从字符串的结尾开始计数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Apple, Banana, Mango&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.slice(-<span class="number">13</span>, -<span class="number">7</span>); <span class="comment">// Banana</span></span><br></pre></td></tr></table></figure>

<p>如果省略第二个参数，则该方法将裁剪字符串的剩余部分：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res = str.slice(<span class="number">7</span>);</span><br></pre></td></tr></table></figure>

<p>从结尾计数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res = str.slice(-<span class="number">13</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>substring(start, end)</code></li>
</ul>
<p>substring() 类似于 slice()。不同之处在于 substring() 无法接受负的索引。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Apple, Banana, Mango&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.substring(<span class="number">7</span>, <span class="number">13</span>); <span class="comment">// &#x27;Banana&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果省略第二个参数，则该 substring() 将裁剪字符串的剩余部分。</p>
<ul>
<li><code>substr(start, length)</code></li>
</ul>
<p>substr() 类似于 slice()。不同之处在于第二个参数规定被提取部分的<em>长度</em>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Apple, Banana, Mango&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.substr(<span class="number">7</span>, <span class="number">6</span>); <span class="comment">// Banana</span></span><br></pre></td></tr></table></figure>

<p>如果省略第二个参数，则该 substr() 将裁剪字符串的剩余部分。</p>
<p>如果首个参数为负，则从字符串的结尾计算位置。 第二个参数不能为负，因为它定义的是长度。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Apple, Banana, Mango&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.substr(-<span class="number">5</span>); <span class="comment">// Mango</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>替换字符串内容<code>replace()</code></li>
</ol>
<p>replace() 方法不会改变调用它的字符串。它返回的是新字符串。</p>
<p>默认地，replace() 只替换首个匹配</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;Please visit Microsoft!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.replace(<span class="string">&quot;Microsoft&quot;</span>, <span class="string">&quot;W3School&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>如需执行大小写不敏感的替换，请使用正则表达式 /i（大小写不敏感）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;Please visit Microsoft!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.replace(<span class="regexp">/MICROSOFT/i</span>, <span class="string">&quot;W3School&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>如需替换所有匹配，请使用正则表达式的 g 标志（用于全局搜索）：</p>
<ol start="6">
<li>转换为大写和小写</li>
</ol>
<p><code>toUpperCase()</code>: 把字符串转换为大写：</p>
<p><code>toLowerCase ()</code>: 把字符串转换为小写：</p>
<ol start="7">
<li><code>concat()</code>方法 连接两个或多个字符串</li>
</ol>
<p>所有字符串方法都会返回新字符串。它们不会修改原始字符串。</p>
<p>正式地说：字符串是不可变的：字符串不能更改，只能替换。</p>
<ol start="8">
<li> <code>String.trim()</code> 删除字符串两端的空白符：</li>
<li>提取字符串字符<br> 这是两个提取字符串字符的<em>安全</em>方法：</li>
</ol>
<ul>
<li>charAt(position)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line">str.charAt(<span class="number">0</span>); <span class="comment">// 返回 H</span></span><br></pre></td></tr></table></figure>

<ul>
<li>charCodeAt(position)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line">str.charCodeAt(<span class="number">0</span>); <span class="comment">// 返回 72</span></span><br></pre></td></tr></table></figure>

<h2 id="属性访问"><a href="#属性访问" class="headerlink" title="属性访问"></a>属性访问</h2><p>ECMAScript 5 (2009) 允许对字符串的属性访问 [ ]</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line">str[<span class="number">0</span>]; <span class="comment">// 返回 H</span></span><br></pre></td></tr></table></figure>

<p>使用属性访问有点不太靠谱</p>
<ul>
<li>它让字符串看起来像是数组（其实并不是）</li>
<li>如果找不到字符，[ ]返回 undefined，而 charAt()返回空字符串。</li>
<li>它是只读的。str[0] = “A”不会产生错误（但也不会工作！）<blockquote>
<p>如果您希望按照数组的方式处理字符串，可以先把它转换为数组。</p>
</blockquote>
</li>
</ul>
<p>把字符串转换为数组<br>split()</p>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h2><ol>
<li>直接字面量</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>构造器构造</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>); <span class="comment">//arr=[1,2,3,4];</span></span><br><span class="line"><span class="keyword">var</span> arr1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>); <span class="comment">// arr=[empty*10]</span></span><br><span class="line"><span class="keyword">var</span> arr2 = <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>); <span class="comment">// arr=[1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<p>构造器构造的数组，如果构造函数的参数传递一个数字代表的是数组的长度，数组当中每一项默认为 empty.</p>
<ol start="3">
<li>Array.of</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">//[1,2,3];</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">Array</span>(<span class="number">3</span>); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure>

<p>Array.of 是返回由所有参数值组成的数组，如果没有参数，就返回一个空数组。Array.of()出现的目的是为了解决构造器构造中因参数个数不同，导致的行为有差异的问题。</p>
<ol start="4">
<li>Array.from(Array.from 是将类数组转换成数组的方法)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> arr = <span class="built_in">Array</span>.from(obj); <span class="comment">//arr=[1,2,3]</span></span><br></pre></td></tr></table></figure>

<h1 id="数组常用方法"><a href="#数组常用方法" class="headerlink" title="数组常用方法"></a>数组常用方法</h1><h2 id="改变原数组"><a href="#改变原数组" class="headerlink" title="改变原数组"></a>改变原数组</h2><p>splice</p>
<p>arr.splice(从第几位开始，剪切多少长度，在切口处添加新的数据)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>];</span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]; <span class="comment">//实现把4填进去</span></span><br><span class="line">arr.splice(<span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>); <span class="comment">//鼠标光标在前面</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.splice(-<span class="number">1</span>, <span class="number">1</span>); <span class="comment">//倒数第一位</span></span><br></pre></td></tr></table></figure>

<p>push</p>
<p>把数组的最后一位增加</p>
<p>unshift</p>
<p>和 push 方向相反，在前面加东西</p>
<p>pop</p>
<p>把数组的最后一位剪切出去   不能传参</p>
<p>shift</p>
<p>把前面减 arr.shift()</p>
<p>reverse</p>
<p>逆反</p>
<p>sort 排序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b; <span class="comment">//升序</span></span><br><span class="line">  <span class="comment">//return b - a;//降序</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>copyWithin</p>
<p>复制数组中某些连接的数据到指定位置</p>
<p>fill</p>
<p>填充数组</p>
<h2 id="不改变原数组"><a href="#不改变原数组" class="headerlink" title="不改变原数组"></a>不改变原数组</h2><p>concat</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">var</span> c = arr.concat(arr1);</span><br></pre></td></tr></table></figure>

<p>toString<br>数组变成字符串<br>Slice<br>截取数组中部分连接数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="comment">// 1.两个参数，slice（从该位开始截取，截取到该位）</span></span><br><span class="line"><span class="comment">// var newArr = arr.slice(1,3);</span></span><br><span class="line"><span class="comment">// 2.一个参数slice（从第几位开始截取，截取到最后）</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.slice(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> newArr = arr.slice(-<span class="number">4</span>); <span class="comment">//-4+6位</span></span><br><span class="line"><span class="comment">// 3.没参数：全截取</span></span><br></pre></td></tr></table></figure>

<p>join<br>实现字符串连接</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">arr.join(<span class="string">&quot;-&quot;</span>); <span class="comment">//必须是字符串形式</span></span><br><span class="line">arr = [<span class="number">1</span> - <span class="number">2</span> - <span class="number">3</span> - <span class="number">4</span>];</span><br></pre></td></tr></table></figure>

<p>split()</p>
<p>互逆方法：按照什么拆分</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span> - <span class="number">2</span> - <span class="number">3</span> - <span class="number">4</span>];</span><br><span class="line">arr.split(<span class="string">&quot;3&quot;</span>); <span class="comment">//必须是字符串形式</span></span><br></pre></td></tr></table></figure>

<p>数组转字符串 join<br>字符串转数组 split</p>
<p>forEach<br>遍历<br>indexOf<br>lastIndexOf<br>includes<br>toLocalString</p>
<p>是不是数组：isArray</p>
<h1 id="数组遍历方法"><a href="#数组遍历方法" class="headerlink" title="数组遍历方法"></a>数组遍历方法</h1><p>es5<br>forEach</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr1.forEach(<span class="function">(<span class="params">ele, index, arr1</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ele)</span><br><span class="line">&#125;)<span class="number">1</span></span><br></pre></td></tr></table></figure>

<pre><code>map
</code></pre>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = arr1.map(<span class="function">(<span class="params">ele, index, arr1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ele * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<pre><code>filter
</code></pre>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = arr1.filter(<span class="function">(<span class="params">ele, index, arr1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ele &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<pre><code>every
some
reduce
reduceRight
</code></pre>
<p>es6<br>find<br>findIndex<br>keys<br>values<br>entries</p>
<h1 id="数组开头-结尾添加元素"><a href="#数组开头-结尾添加元素" class="headerlink" title="数组开头/结尾添加元素"></a>数组开头/结尾添加元素</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line">方法<span class="number">1</span>;</span><br><span class="line">myArray.push(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">myArray.unshift(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">方法<span class="number">2</span>;</span><br><span class="line">myArray = [<span class="string">&quot;start&quot;</span>, ...myArray];</span><br><span class="line">myArray = [...myArray, <span class="string">&quot;end&quot;</span>];</span><br></pre></td></tr></table></figure>

<h1 id="类数组转数组"><a href="#类数组转数组" class="headerlink" title="类数组转数组"></a>类数组转数组</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.slice.call(arrayLike);</span><br><span class="line">返回的是一个<span class="built_in">Array</span>类型对象;</span><br></pre></td></tr></table></figure>

<p>已知数组 var stringArray = [“This”, “is”, “Baidu”, “Campus”]  This is Baidu Campus”</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stringArray = [<span class="string">&quot;this&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;baidu&quot;</span>];</span><br><span class="line">stringArray = stringArray.join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">stringArray = stringArray.toString();</span><br><span class="line"><span class="built_in">console</span>.log(stringArray);</span><br></pre></td></tr></table></figure>

<p>Foreach<br>初探</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="comment">// 数组方法：定义在Array.prototype</span></span><br><span class="line"><span class="comment">// forEach:参数：函数</span></span><br><span class="line"><span class="comment">// personArr.forEach(</span></span><br><span class="line"><span class="comment">//     // 不断调用，执行几次取决于数组元素的个数</span></span><br><span class="line"><span class="comment">//     function (ele, index, self) &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// );</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deal</span>(<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ele, index, self);</span><br><span class="line">&#125;</span><br><span class="line">personArr.forEach(deal);</span><br></pre></td></tr></table></figure>

<p>小应用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;ul&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oLiArray = oUl.getElementsByTagName(<span class="string">&quot;li&quot;</span>); <span class="comment">//类数组</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> personArr = [</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">    &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">  ];</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">deal</span>(<span class="params">ele, index, self</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    oLiArray[index].innerText = ele.name;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  personArr.forEach(deal);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>深入源码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;ul&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> oLiArray = oUl.getElementsByTagName(<span class="string">&quot;li&quot;</span>); <span class="comment">//类数组</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> personArr = [</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123;</span></span><br><span class="line"><span class="javascript">          <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">      ];</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 目的：数组实例可以调用该方法，要达到循环遍历的作用</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 参数：需要一个函数，最后实现我们一系列功能，函数执行的时候也会接受参数 ele(元素) index(该元素在数组中的索引) self(数组本身)</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">Array</span>.prototype.myForEach = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 实现功能：执行多少次取决于数组的个数</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// this =&gt; personArr</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> len = <span class="built_in">this</span>.length;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// this[i] 等价于 personArr[0]</span></span></span><br><span class="line"><span class="javascript">          func(<span class="built_in">this</span>[i], i, <span class="built_in">this</span>);</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">deal</span>(<span class="params">ele, index, self</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(ele, index, self);</span></span></span><br><span class="line"><span class="javascript">        oLiArray[index].innerText = ele.name;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      personArr.myForEach(deal);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二个参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deal</span>(<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ele, index, self, <span class="built_in">this</span>);</span><br><span class="line">  <span class="comment">// this是谁取决于：是否传第二个参数，不传则window</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;;</span><br><span class="line">personArr.forEach(deal, obj);</span><br></pre></td></tr></table></figure>

<p>源码实现</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;ul&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oLiArray = oUl.getElementsByTagName(<span class="string">&quot;li&quot;</span>); <span class="comment">//类数组</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> personArr = [</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">    &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span></span><br><span class="line"><span class="javascript">  ];</span></span><br><span class="line"><span class="javascript">  <span class="built_in">Array</span>.prototype.myForEach = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> len = <span class="built_in">this</span>.length;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 实际参数列表</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> _this = <span class="built_in">arguments</span>[<span class="number">1</span>] != <span class="literal">undefined</span> ? <span class="built_in">arguments</span>[<span class="number">1</span>] : <span class="built_in">window</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="javascript">      func.apply(_this, [<span class="built_in">this</span>[i], i, <span class="built_in">this</span>]);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">deal</span>(<span class="params">ele, index, self</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// this =&gt; window</span></span></span><br><span class="line"><span class="javascript">    oLiArray[index].innerText = ele.name;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(ele, index, self, <span class="built_in">this</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;;</span></span><br><span class="line"><span class="javascript">  personArr.myForEach(deal, obj);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Filter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.filter 对数组过滤作用，基于遍历的</span></span><br><span class="line"><span class="comment">// filter 参数 函数</span></span><br><span class="line"><span class="comment">// filter执行完后，会返回一个新的数组</span></span><br><span class="line"><span class="keyword">var</span> newArray = personArr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// if (ele.sex == &quot;m&quot;) &#123;</span></span><br><span class="line">  <span class="comment">//     return true;</span></span><br><span class="line">  <span class="comment">// &#125; else &#123;</span></span><br><span class="line">  <span class="comment">//     return false;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">return</span> ele.sex == <span class="string">&quot;m&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newArray);</span><br></pre></td></tr></table></figure>

<p>封装 filter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="built_in">Array</span>.prototype.myFilter = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">var</span> len = <span class="built_in">this</span>.length;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="built_in">arguments</span>[<span class="number">1</span>] || <span class="built_in">window</span>; <span class="comment">//遇到真的直接返回</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    func.apply(_this, [<span class="built_in">this</span>[i], i, <span class="built_in">this</span>]) &amp;&amp; arr.push(<span class="built_in">this</span>[i]); <span class="comment">//如果前面正确，就用后面的</span></span><br><span class="line">    <span class="comment">// 写法2</span></span><br><span class="line">    <span class="comment">// if (func.apply(_this, [this[i], i, this])) &#123;</span></span><br><span class="line">    <span class="comment">//     arr.push(this[i]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> newArr = personArr.myFilter(<span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  <span class="comment">// this</span></span><br><span class="line">  <span class="keyword">return</span> ele.sex == <span class="string">&quot;f&quot;</span>;</span><br><span class="line">&#125;, obj);</span><br><span class="line"><span class="built_in">console</span>.log(newArr);</span><br></pre></td></tr></table></figure>

<p>Map</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">40</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">50</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">29</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.map映射作用 返回新数组</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> newNameArr = personArr.map(<span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// this=obj</span></span><br><span class="line">  <span class="comment">// console.log(ele, index, self, this);</span></span><br><span class="line">  <span class="keyword">return</span> ele.name;</span><br><span class="line">&#125;, obj);</span><br><span class="line"><span class="built_in">console</span>.log(newNameArr);</span><br></pre></td></tr></table></figure>

<p>源码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">40</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">50</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">29</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.myMap = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">var</span> len = <span class="built_in">this</span>.length;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="built_in">arguments</span>[<span class="number">1</span>] || <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    arr.push(func.call(_this, <span class="built_in">this</span>[i], i, <span class="built_in">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> newNameArr = personArr.map(<span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  <span class="keyword">return</span> ele.name;</span><br><span class="line">&#125;, obj);</span><br><span class="line"><span class="built_in">console</span>.log(newNameArr);</span><br></pre></td></tr></table></figure>

<p>Every</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">40</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">50</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">29</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="comment">// Array.prototype.every</span></span><br><span class="line"><span class="comment">// 目的：判断数组元素是否都符合条件 true false</span></span><br><span class="line"><span class="keyword">var</span> flag = personArr.every(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">if</span> (ele.age &gt; <span class="number">18</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;</span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(flag);</span><br></pre></td></tr></table></figure>

<p>源码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">40</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">50</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">29</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="built_in">Array</span>.prototype.myEvery = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">var</span> len = <span class="built_in">this</span>.length;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="built_in">arguments</span>[<span class="number">1</span>] || <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (func.apply(_this, [<span class="built_in">this</span>[i], i, <span class="built_in">this</span>]) == <span class="literal">false</span>) &#123;</span><br><span class="line">      flag = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> flag;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> flag = personArr.myEvery(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">if</span> (ele.age &gt; <span class="number">18</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;</span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(flag);</span><br></pre></td></tr></table></figure>

<p>Some</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personArr = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;王港&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/3.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;颈椎不好&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘莹&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/5.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;我是谁&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王秀莹&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/4.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;我很好看&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;f&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">40</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;刘金雷&quot;</span>,</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&quot;./src/img/1.png&quot;</span>,</span><br><span class="line">    <span class="attr">des</span>: <span class="string">&quot;你没有见过陌生的脸&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">50</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;刘飞翔&quot;</span>, <span class="attr">src</span>: <span class="string">&quot;./src/img/2.png&quot;</span>, <span class="attr">des</span>: <span class="string">&quot;瓜皮刘&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;m&quot;</span>, <span class="attr">age</span>: <span class="number">2</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> flag = personArr.some(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 一真则真</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">if</span> (ele.age &lt; <span class="number">18</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;</span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(flag);</span><br></pre></td></tr></table></figure>

<p>Reduce 从左向右遍历<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017420042">https://segmentfault.com/a/1190000017420042</a><br>应用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.cookie);</span><br><span class="line"><span class="keyword">var</span> cookieStr =</span><br><span class="line">  <span class="string">&quot;BIDUPSID=5B95EF6FA42E8383ED0DF3B230A443E4; PSTM=1604537657; BAIDUID=5B95EF6FA42E8383AAD0F65E4D7F2E56:FG=1; H_WISE_SIDS=107319_110085_127969_128698_131423_132548_151533_154213_165135_165935_166148_167537_168389_168490_168542_169060_169308_169770_170036_170817_170872_171159_171235_171706_171930_172385_172499_172678_172871_172897_172938_172996_173016_173033_173125_173127_173129_173202_173221_173244_173369_173387_173414_173564_173609_173711_8000097_8000106_8000129_8000139_8000145; MSA_WH=375_667; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BD_UPN=12314753; H_PS_PSSID=34298_33801_34322_31253_34331_34004_34072_34092_26350_34246; BAIDUID_BFESS=5B95EF6FA42E8383AAD0F65E4D7F2E56:FG=1; delPer=0; BD_CK_SAM=1; PSINO=1; H_PS_645EC=00aeqYdOwo0pndDhzUfhp00eoOoEcL5cDeqOEhDW1M7FqfrhZGt8gXfo6mNS3VkB7bbR; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; BD_HOME=1; BA_HECTOR=8g04210g0g0g2l2h5i1ggab600q&quot;</span>;</span><br><span class="line"><span class="comment">// name =&gt; value</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseCookieStr</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> cookieArr = str.split(<span class="string">&quot;; &quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> cookieArr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">preValue, icurValue, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// console.log(preValue, icurValue)</span></span><br><span class="line">    <span class="keyword">var</span> arr = icurValue.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    preValue[arr[<span class="number">0</span>]] = arr[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> preValue;</span><br><span class="line">  &#125;, obj);</span><br><span class="line">  <span class="comment">// console.log(cookieArr)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(parseCookieStr(cookieStr));</span></span><br><span class="line"><span class="keyword">var</span> cookieObj = parseCookieStr(cookieStr);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myReduce = <span class="function"><span class="keyword">function</span> (<span class="params">func, initialValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = <span class="built_in">this</span>.length,</span><br><span class="line">    _this = <span class="built_in">arguments</span>[<span class="number">2</span>] || <span class="built_in">window</span>,</span><br><span class="line">    nextValue = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    nextValue = func.apply(_this, [nextValue, <span class="built_in">this</span>[i], i, <span class="built_in">this</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nextValue;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ReduceRight 从右向左遍历</p>
<h1 id="题"><a href="#题" class="headerlink" title="题"></a>题</h1><h1 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;this&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;baidu&quot;</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString()); <span class="comment">//this,is,baidu</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.join(<span class="string">&quot; &quot;</span>)); <span class="comment">//this is baidu</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//已知有字符串 foo=&quot;get-element-by-id&quot;,写一个 function 将其转化成驼峰表示法&quot;getElementById&quot;。</span></span><br><span class="line">答案：<span class="function"><span class="keyword">function</span> <span class="title">combo</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = msg.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> len = arr.length; <span class="comment">//将 arr.length 存储在一个局部变量可以提高 for 循环效</span></span><br><span class="line">  率</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt;len;i++)&#123;</span><br><span class="line">    arr[i]=arr[i].charAt(<span class="number">0</span>).toUpperCase()+arr[i].substr(<span class="number">1</span>,arr[i].length-<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  msg=arr.join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">specify(‘hello,world’)<span class="comment">//=&gt;’h,e,l,l,o,w,o,r,l,d’ 实 现 specify</span></span><br><span class="line">函</span><br></pre></td></tr></table></figure>

<h1 id><a href="#" class="headerlink" title></a></h1><h1 id="你不知道的-JS"><a href="#你不知道的-JS" class="headerlink" title="你不知道的 JS"></a>你不知道的 JS</h1><h1 id="一、UI-多线程"><a href="#一、UI-多线程" class="headerlink" title="一、UI 多线程"></a>一、UI 多线程</h1><h2 id="1-浏览器常驻的线程"><a href="#1-浏览器常驻的线程" class="headerlink" title="1.浏览器常驻的线程"></a>1.浏览器常驻的线程</h2><blockquote>
<p>js 引擎线程 （解释执行 js 代码、用户输入、网络请求）<br>GUI 线程 （绘制用户界面、与 js 主线程是互斥的）<br>http 网络请求线程 （处理用户的 get、post 等请求，等返回结果后将回调函数推入任务队列）<br>定时触发器线程 （setTimeout、setInterval 等待时间结束后把执行函数推入任务队列中）<br>浏览器事件处理线程 （将 click、mouse 等交互事件发生后将这些事件放入事件队列中）</p>
</blockquote>
<h2 id="2-UI-主线程负责协调运转"><a href="#2-UI-主线程负责协调运转" class="headerlink" title="2.UI 主线程负责协调运转"></a>2.UI 主线程负责协调运转</h2><p><img src="/img/1-6.png"></p>
<h2 id="3-JS-引擎线程和-GUI-线程-互斥"><a href="#3-JS-引擎线程和-GUI-线程-互斥" class="headerlink" title="3.JS 引擎线程和 GUI 线程-互斥"></a>3.JS 引擎线程和 GUI 线程-互斥</h2><p>JS 可以操作 DOM 元素，进而会影响到 GUI 的渲染结果，因此 JS 引擎线程与 GUI 渲染线程是互斥的。也就是说当 JS 引擎线程处于运行状态时，GUI 渲染线程将处于冻结状态。<br>JS 单线程：当死循环，点击事件永远失效</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>run<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="comment">// dieLoop();//这里因为是死循环，所以执行点击的时候，不会触发UI，按钮样式不会变化</span></span></span><br><span class="line"><span class="javascript">  oBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;0&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">dieLoop</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;&#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-Js-执行机制-单线程"><a href="#4-Js-执行机制-单线程" class="headerlink" title="4.Js 执行机制-单线程"></a>4.Js 执行机制-单线程</h2><p>单线程-同一时间只能做一件事</p>
<blockquote>
<p>Js 执行机制-多线程不好吗？</p>
</blockquote>
<p>js 设计出来就是为了与用户交互，处理 DOM，假如 js 是多线程，同一时间一个线程想要修改 DOM，另一个线程想要删除 DOM，问题就变得复杂许多，浏览器不知道听谁的，如果引入“锁”的机制，这不就又回到了被其他语言尴尬的困境了吗。</p>
<h2 id="5-大量数据操作怎么办？"><a href="#5-大量数据操作怎么办？" class="headerlink" title="5.大量数据操作怎么办？"></a>5.大量数据操作怎么办？</h2><p>单线程计算能力有限，大量数据需要计算渲染的话，我们可以配合后端进行操作，比如我们后期进阶班里降到的 VUE 与 nodejs 配合，也就是传说中的 SSR 技术。</p>
<h2 id="6-Js-执行机制"><a href="#6-Js-执行机制" class="headerlink" title="6.Js 执行机制"></a>6.Js 执行机制</h2><p>JavaScript 是基于单线程运行的，同时又是可以异步执行的，一般来说这种既是单线程又是异步的语言都是基于事件来驱动的，恰好浏览器就给 JavaScript 提供了这么一个环境<br>导图要表达的内容用文字来表述的话：<br><img src="/img/1-7.png"><br>同步和异步任务分别进入不同的执行”场所”，同步的进入主线程，异步的进入 Event Table 并注册函数。<br>当指定的事情完成时，Event Table 会将这个函数移入 Event Queue。<br>主线程内的任务执行完毕为空，会去 Event Queue 读取对应的函数，进入主线程执行。</p>
<p>上述过程会不断重复，也就是常说的 Event Loop(事件循环)。</p>
<blockquote>
<p>同步任务</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params">ot</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params">it</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(it);</span><br><span class="line">  &#125;</span><br><span class="line">  inner(<span class="number">20</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(ot);</span><br><span class="line">&#125;</span><br><span class="line">outer(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>代码没有执行的时候，执行栈为空栈</li>
<li>foo 函数执行时，创建了一帧，这帧中包含了形参、局部变量（预编译过程），然后把这一帧压入栈中</li>
<li>然后执行 foo 函数内代码，执行 bar 函数</li>
<li>创建新帧，同样有形参、局部变量，压入栈中</li>
<li>bar 函数执行完毕，弹出栈</li>
<li>foo 函数执行完毕，弹出栈</li>
<li>执行栈为空<br>执行栈其实相当于 js 主线程<blockquote>
<p>异步任务</p>
</blockquote>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  <span class="attr">url</span>: ‘localhost:<span class="regexp">/js/</span>demo.json’,</span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">       <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(‘run’);</span><br></pre></td></tr></table></figure>

<p>Ajax 进入 Event Table，注册回调函数 success<br>执行 console.log(‘run’)<br>ajax 事件完成 http 网络请求线程把任务放入 Event Queue 中<br>主线程（调用栈）读取任务下执行 success 函数<br>换一张图理解一下<br>用定时器举个栗子<br><img src="/img/1-8.png"></p>
<h2 id="7-重新理解定时器"><a href="#7-重新理解定时器" class="headerlink" title="7.重新理解定时器"></a>7.重新理解定时器</h2><p>setTimeout 的等待时间结束后并不是直接执行的而是先推入浏览器<br>的一个任务队列，在同步队列结束后在依次调用任务队列中的任务。<br>setTimeout(function(){}, 0)Js 主线程中的执行栈为空时，0 毫秒实际上也达不到的，根据 HTML 标准，最低 4 毫秒。<br>setInterval 是每隔一段时间把任务放到 Event Queue 之中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> statTime = +<span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">//+:直接调用getTime</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; time; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(statTime);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(+<span class="keyword">new</span> <span class="built_in">Date</span>() - statTime);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line">sleep(<span class="number">10000</span>);</span><br></pre></td></tr></table></figure>

<p>定时器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(‘time’)&#125;, <span class="number">400</span>);</span><br><span class="line">outer(<span class="number">100000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(‘hello world’);</span><br></pre></td></tr></table></figure>

<p>真正了解底层原理，才能是持续化发展之路。</p>
<h1 id="二、Bind-的模拟实现"><a href="#二、Bind-的模拟实现" class="headerlink" title="二、Bind 的模拟实现"></a>二、Bind 的模拟实现</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = &#123;</span><br><span class="line">  <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.message = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="built_in">this</span>.bindEvent();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bindEvent</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// this = list</span></span><br><span class="line">    <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;div&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    oDiv.onclick = <span class="built_in">this</span>.show; <span class="comment">// div</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// show : function () &#123;</span></span><br><span class="line">  <span class="comment">// 	console.log(this);</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="attr">show</span>: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.target);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">list.init();</span><br></pre></td></tr></table></figure>

<h2 id="1-Bind-的使用"><a href="#1-Bind-的使用" class="headerlink" title="1.Bind 的使用"></a>1.Bind 的使用</h2><p>Func.bind(x1, x2, x3, …..)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&quot;width: 100px; height: 100px;background-color: red;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>)[<span class="number">0</span>]</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">var</span> list = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">this</span>.message = <span class="string">&#x27;hello&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">this</span>.bindEvent();</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">bindEvent</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// this = list</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    oDiv.onclick = <span class="built_in">this</span>.show.bind(<span class="built_in">this</span>);<span class="comment">//即执行show的功能，this又指向list</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">show</span>: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(e.target, <span class="built_in">this</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">list.init();</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">  <span class="built_in">console</span>.log(name, age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// show(obj, &#x27;cc&#x27;, 19)</span></span><br><span class="line"><span class="keyword">var</span> newShow = show.bind(obj); <span class="comment">//改变了this</span></span><br><span class="line">newShow(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>继续传参</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">  <span class="built_in">console</span>.log(name, age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> newShow = show.bind(obj, <span class="string">&quot;sc&quot;</span>);</span><br><span class="line">newShow(<span class="number">19</span>);</span><br><span class="line"><span class="comment">//也可传三个参数</span></span><br><span class="line"><span class="keyword">var</span> newShow = show.bind(obj, <span class="string">&quot;sc&quot;</span>, <span class="number">19</span>);</span><br><span class="line">newShow();</span><br><span class="line"><span class="comment">// 可以传null</span></span><br><span class="line"><span class="keyword">var</span> newShow = show.bind(<span class="literal">null</span>, <span class="string">&quot;sc&quot;</span>, <span class="number">19</span>);</span><br><span class="line">newShow();</span><br><span class="line"><span class="keyword">var</span> newShow = show.bind(<span class="literal">null</span>, <span class="string">&quot;sc&quot;</span>, <span class="number">19</span>);</span><br><span class="line"><span class="keyword">new</span> newShow(); <span class="comment">//新对象   undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="2-Instanceof"><a href="#2-Instanceof" class="headerlink" title="2.Instanceof"></a>2.Instanceof</h2><p>var obj = new Object();</p>
<p>obj instanceof Object == true</p>
<h1 id="三、惰性函数"><a href="#三、惰性函数" class="headerlink" title="三、惰性函数"></a>三、惰性函数</h1><p>针对于优化频繁使用的函数</p>
<p>常用于，函数库的编写，单例模式之中</p>
<p>写一个 test 函数，这个函数返回首次调用时的 new Date().getTime()时间，注意是首次。</p>
<p>惰性函数-全局污染</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (t) &#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;</span><br><span class="line">  t = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>惰性函数-非调用时计算时间</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test1 = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>惰性函数-未解决判断</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test2 = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t) <span class="keyword">return</span> t;</span><br><span class="line">    t = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>惰性函数-完美</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  t = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  test = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> test();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>惰性函数</p>
<p>事件函数的封装</p>
<p>滚动条偏移量函数的封装</p>
<p>jQuery 函数库的封装</p>
<h1 id="四、防抖-amp-节流"><a href="#四、防抖-amp-节流" class="headerlink" title="四、防抖&amp;节流"></a>四、防抖&amp;节流</h1><p>在前端开发中有一部分的用户行为会频繁的触发事件执行，而对于 DOM 操作、资源加载等耗费性能的处理，很可能导致界面卡顿，甚至浏览器的崩溃。函数节流(throttle)和函数防抖(debounce)就是为了解决类似需求应运而生的。</p>
<p>函数节流就是预定一个函数只有在大于等于执行周期时才执行，周期内调用不执行。好像水滴攒到一定重量才会落下一样。</p>
<p>场景：</p>
<pre><code>窗口调整（resize）


页面滚动（scroll）


抢购疯狂点击（mousedown）
</code></pre>
<h1 id="五、柯里化"><a href="#五、柯里化" class="headerlink" title="五、柯里化"></a>五、柯里化</h1><p>函数式编程之柯里化</p>
<p>在数学和计算机科学中，柯里化是一种将使用多个参数的一个函数转换成一系列使用一个参数的函数的技术。</p>
<h2 id="1-前端-why？柯里化"><a href="#1-前端-why？柯里化" class="headerlink" title="1. 前端 why？柯里化"></a>1. 前端 why？柯里化</h2><p>前端使用柯理化的用途主要就应该是简化代码结构，提高系统的维护性，一个方法，只有一个参数，强制了功能的单一性，很自然就做到了功能内聚，降低耦合。<br>柯理化的优点就是降低代码的重复，提高代码的适应性</p>
<h2 id="2-调用形式"><a href="#2-调用形式" class="headerlink" title="2.调用形式"></a>2.调用形式</h2><p>function add(a,b,c){} ;<br>var newAdd = Curry(add);<br>newAdd(1)(2)(3)</p>
<h1 id="3-柯里化前奏-需要固定数量参数"><a href="#3-柯里化前奏-需要固定数量参数" class="headerlink" title="3.柯里化前奏-需要固定数量参数"></a>3.柯里化前奏-需要固定数量参数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FixedParamsCurry</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// [add, 1, 2]</span></span><br><span class="line">  <span class="keyword">var</span> _arg = [].slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// arguments [2, 3]</span></span><br><span class="line">    <span class="comment">// [1,2,2,3]</span></span><br><span class="line">    <span class="keyword">var</span> newArg = _arg.concat([].slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, newArg); <span class="comment">//this就是函数环境</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> newAdd = FixedParamsCurry(add, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(newAdd(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<h2 id="4-实现柯里化-期待固定数量参数（不是必须这次，可以下次）"><a href="#4-实现柯里化-期待固定数量参数（不是必须这次，可以下次）" class="headerlink" title="4. 实现柯里化-期待固定数量参数（不是必须这次，可以下次）"></a>4. 实现柯里化-期待固定数量参数（不是必须这次，可以下次）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// add.length</span></span><br><span class="line">  <span class="keyword">return</span> a + b + c + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FixedParamsCurry</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _arg = [].slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newArg = _arg.concat([].slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, newArg);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Curry</span>(<span class="params">fn, length</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// length:4</span></span><br><span class="line">  <span class="keyword">var</span> length = length || fn.length;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; length) &#123;</span><br><span class="line">      <span class="comment">// [fn].concat([1])  [fn,1]</span></span><br><span class="line">      <span class="keyword">var</span> combined = [fn].concat([].slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>));</span><br><span class="line">      <span class="keyword">return</span> Curry(</span><br><span class="line">        FixedParamsCurry.apply(<span class="built_in">this</span>, combined),</span><br><span class="line">        length - <span class="built_in">arguments</span>.length</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> newAdd = Curry(add);</span><br><span class="line"><span class="comment">// console.log(newAdd(1,2,3,4));</span></span><br><span class="line"><span class="comment">// console.log(newAdd(1)(2,3,4));// FixedParamsCurry</span></span><br><span class="line"><span class="comment">// console.log(newAdd(1)(2)(3)(4));//外部包裹Curry</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用于ajax</span></span><br><span class="line"><span class="comment">// POST www.test1.com &#x27;name=cst&amp;code=111&#x27;</span></span><br><span class="line"><span class="comment">// POST www.test1.com &#x27;key=222&#x27;</span></span><br><span class="line"><span class="comment">// POST www.test2.com &#x27;name=cst&amp;code=111&#x27;</span></span><br><span class="line"><span class="comment">// POST www.test2.com &#x27;key=111&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method, url, data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(method);</span><br><span class="line">  <span class="built_in">console</span>.log(url);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ajax(&#x27;POST&#x27;, &#x27;www.test1.com&#x27;, &#x27;name=cst&amp;code=111&#x27;)</span></span><br><span class="line"><span class="comment">// ajax(&#x27;POST&#x27;, &#x27;www.test1.com&#x27;, &#x27;key=222&#x27;)</span></span><br><span class="line"><span class="comment">// ajax(&#x27;POST&#x27;, &#x27;www.test2.com&#x27;, &#x27;name=cst&amp;code=111&#x27;)</span></span><br><span class="line"><span class="comment">// ajax(&#x27;POST&#x27;, &#x27;www.test2.com&#x27;, &#x27;key=222&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ajaxCurry = Curry(ajax);</span><br><span class="line"><span class="keyword">var</span> PostAjax = ajaxCurry(<span class="string">&quot;POST&quot;</span>);</span><br><span class="line">PostAjax(<span class="string">&quot;www.test1.com&quot;</span>, <span class="string">&quot;key=222&quot;</span>);</span><br><span class="line">PostAjax(<span class="string">&quot;www.test1.com&quot;</span>, <span class="string">&quot;name=cst&amp;code=111&quot;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="五、节流"><a href="#五、节流" class="headerlink" title="五、节流"></a>五、节流</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;show&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;show&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">  oBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    oDiv.innerText = <span class="built_in">parseInt</span>(oDiv.innerText) + <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 写一个恶意脚本，点击button</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// for (var i = 0; i &lt; 9000; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//     oBtn.onclick()</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>封装节流</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;show&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;show&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">handler, wait</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> lastTime = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//返回出去改函数让OBtn调用</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//arguments第0位即[event]</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 这里的this是oBtn</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> nowTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (nowTime - lastTime &gt; wait) &#123;</span></span><br><span class="line"><span class="javascript">        handler.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span></span><br><span class="line"><span class="javascript">        lastTime = nowTime;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">buy</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="built_in">this</span>, e);</span></span><br><span class="line"><span class="javascript">    oDiv.innerText = <span class="built_in">parseInt</span>(oDiv.innerText) + <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  oBtn.onclick = throttle(buy, <span class="number">1000</span>);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="六、防抖"><a href="#六、防抖" class="headerlink" title="六、防抖"></a>六、防抖</h1><p>在前端开发中有一部分的用户行为会频繁的触发事件执行，而对于 DOM 操作、资源加载等耗费性能的处理，很可能导致界面卡顿，甚至浏览器的崩溃。函数节流(throttle)和函数防抖(debounce)就是为了解决类似需求应运而生的。<br>场景：<br>实时搜索(keyup)<br>拖拽(mousemove)<br>初级防抖</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;inp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oInp = <span class="built_in">document</span>.getElementById(<span class="string">&quot;inp&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//时间对象</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(e, <span class="built_in">this</span>.value);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  oInp.oninput = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> _self = <span class="built_in">this</span>,</span></span><br><span class="line"><span class="javascript">      _arg = <span class="built_in">arguments</span>;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">clearTimeout</span>(timer);</span></span><br><span class="line"><span class="javascript">    timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      ajax.apply(_self, _arg);</span></span><br><span class="line"><span class="javascript">    &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>封装防抖：便于所有函数应用防抖</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;inp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oInp = <span class="built_in">document</span>.getElementById(<span class="string">&quot;inp&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">hander, delay</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> _self = <span class="built_in">this</span>,</span></span><br><span class="line"><span class="javascript">        _arg = <span class="built_in">arguments</span>;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">clearTimeout</span>(timer);</span></span><br><span class="line"><span class="javascript">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        hander.apply(_self, _arg);</span></span><br><span class="line"><span class="javascript">      &#125;, delay);</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//时间对象</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(e, <span class="built_in">this</span>.value);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  oInp.oninput = debounce(ajax, <span class="number">2000</span>);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="七、纯函数"><a href="#七、纯函数" class="headerlink" title="七、纯函数"></a>七、纯函数</h1><p>纯函数：对于相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用，也不依赖外部环境的状态<br>依赖外部 num：不是纯函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">18</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x &gt; num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(compare(<span class="number">20</span>));</span><br></pre></td></tr></table></figure>

<p>纯函数：不影响外界，不依赖于外界</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x &gt; <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(compare(<span class="number">20</span>));</span><br></pre></td></tr></table></figure>

<p>纯函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">18</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">x, num</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// AO -&gt; num 是自己的num，不是外部的。此处的num是实参传进来的</span></span><br><span class="line">  <span class="keyword">return</span> x &gt; num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(compare(<span class="number">20</span>, num));</span><br></pre></td></tr></table></figure>

<p>对外部 arr 产生了影响</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">_arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;;</span><br><span class="line">  _arr.push(obj);</span><br><span class="line">&#125;</span><br><span class="line">add(arr);</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>

<p>想变成纯函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [&#123; <span class="attr">name</span>: <span class="string">&quot;duyi&quot;</span> &#125;];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">_arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;cst&quot;</span> &#125;;</span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; _arr.length; i++) &#123;</span><br><span class="line">    newArr[i] = _arr[i]; <span class="comment">//尽量深克隆</span></span><br><span class="line">  &#125;</span><br><span class="line">  newArr.push(obj);</span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> newArr = add(arr);</span><br></pre></td></tr></table></figure>

<p>纯函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// x, y</span></span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> num1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> num2 = <span class="number">2</span>;</span><br><span class="line">add(num1, num2);</span><br></pre></td></tr></table></figure>

<p>作用<br>在 JavaScript 中你可以很容易的创建全局变量，这些变量可以在所有函数中访问到。<br>这也是一个导致 bug 的常见原因，因为程序中的任何部分都可能修改全局变量从而导致函数的行为出现异常。<br>纯函数非常容易进行单元测试,因为不需要考虑上下文环境.只需要考虑输入和输出<br>纯函数是健壮的，改变执行次序不会对系统造成影响,因此纯函数的操作可以并行执行。<br>组件化开发-状态共享<br>数组过滤：满足完性王的，返回之后还能满足找性刘的<br>​</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">John Doe</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2020/01/20/JavaScript%E5%AE%8C%E7%BE%8E%E6%94%B6%E5%AE%98/">http://example.com/2020/01/20/JavaScript%E5%AE%8C%E7%BE%8E%E6%94%B6%E5%AE%98/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint policy. If reproduced, please indicate source
                    <a href="/about" target="_blank">John Doe</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Front-end-article/">
                                    <span class="chip bg-color">Front end article</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2020/01/28/%E5%89%8D%E7%AB%AF%E7%BD%91%E7%BB%9C/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="前端网络">
                        
                        <span class="card-title">前端网络</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-01-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            John Doe
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Front-end-article/">
                        <span class="chip bg-color">Front end article</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/01/09/Regular-Expression/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="Regular Expression">
                        
                        <span class="card-title">Regular Expression</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-01-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            John Doe
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Front-end-article/">
                        <span class="chip bg-color">Front end article</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2021</span>
            
            <a href="/about" target="_blank">John Doe</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;Total visits:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;Total visitors:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
